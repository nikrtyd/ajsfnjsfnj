<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=IE=edge http-equiv=X-UA-Compatible><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Задача: график 1</title><style>@import"https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap";:root{--body-background: #114;--body-foreground: #eee;--body-background-locked: #225;--body-foreground-locked: #ddd;--button-background: #336;--button-background-active: #225;--button-border: #ccc;--table-border: #99f;--input-border: #aaf;--system-before: #ccc2;--label: #66a;--good: #6f80ef;--bad: #6c70df;--border-radius: 20px}body,main{margin:0 auto;background:var(--body-background);color:var(--body-foreground);font-family:"Bahnschrift","JetBrains Mono",Geneva,Verdana,sans-serif;font-size:18px;height:100vh}.flex{display:flex}.ai-c{align-items:center}.jc-c{justify-content:center}table td{text-align:center;padding:5px 10px}.dir-col{flex-direction:column}td:not([contenteditable]){background:var(--body-background-locked);color:var(--body-foreground-locked)}.hide{display:none}table,input[type=text],select,textarea{border-radius:20px;overflow:hidden;border:1px solid #99f;font:inherit;font-family:"JetBrains Mono";max-width:670px}select{padding:5px}button{padding:10px 20px;background:#77d;border-radius:20px;font:inherit;border:none}button:active{background:#44a}input,select,textarea{background:inherit;border:2px solid var(--input-border);padding:20px;color:inherit;min-height:30px}textarea{min-width:260px;border-radius:20px 20px 0}.good,.bad{font-weight:bold;font-size:14px}.good{color:var(--good)}.bad{color:var(--bad)}._x{text-align:center;color:#000;margin-bottom:10px}label{font-weight:bold;font-size:14px;color:var(--button-border)}.full-wh{width:100vw;height:100vh}.gap{gap:20px}.out{background-color:#fff}</style><body><div class="flex ai-c dir-col jc-c full-wh gap"><table border=1 cellpadding=0 cellspacing=0><tbody><tr><td rowspan=2>Виды кормов<td colspan=3>Содержание в 1 кг кормов<td rowspan=2>Стоимость 1 кг в тенге<tr><td>Кормовых единиц<td>Белка<td>Кальция<tr><td>Сено<td contenteditable=true><td contenteditable=true><td contenteditable=true><td contenteditable=true><tr><td>Концентраты<td contenteditable=true><td contenteditable=true><td contenteditable=true><td contenteditable=true><tr><td>Суточная потребность<td contenteditable=true><td contenteditable=true><td contenteditable=true><td class=fw-b></table><div class="in cont flex dir-col gap"><button id=calc onclick=tta()>Вычислить</button><textarea cols=30 readonly rows=10></textarea></div><div class="out cont flex dir-col gap"><canvas style="width:500px;height:500px;border:1px solid #d3d3d3"height=500 id=canvas width=500>Graph Test</canvas><span class=_x></span></div></div><script src=https://cdn.jsdelivr.net/npm/plotta.js@1.1.1/dist/dev/plotta.min.js></script><script crossorigin=anonymous integrity=sha512-6lYnaXxV7SCjRXACDDfNod7K610C8CkFbFlnxa3ZowVEbdWlnnJ5rvP9zWenwOhPBY+N3VqW/3SL0/mS4YJYlQ== referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/algebra.js/0.2.3/algebra.js></script><script>let colors=["#f00","#0f0","#00f","#f0f","#f70","#70f","#f005","#0f05","#00f5","#f0f5","#f705"];function elem(e){return document.querySelector(e)}function elems(e){return document.querySelectorAll(e)}function newm(e){const r=[,];for(let t=2;t<e.rows.length;t++){let l=[];for(let n=1;n<e.rows[t].cells.length;n++)l.push(parseFloat(e.rows[t].cells[n].innerText));r[t-2]=l}return r}function gtf(e){return`f(x) = ${e[0][3]}x1 + ${e[1][3]}x2 -> min`}function grs(e){let r="";for(let t=0;t<e.length;t++)r+=`${`${e[0][t]}x1 + ${e[1][t]}x2 >= ${e[2][t]}`}\n`;return r}let mainTable=elem("table");for(let e=0;e<mainTable.rows.length;e++)for(let r=0;r<mainTable.rows[e].cells.length;r++)mainTable.rows[e].cells[r].onkeydown=function(t){t||(t=window.event);var l=t.keyCode||t.which;if(!t.ctrlKey&&!t.metaKey&&!t.altKey)return l>=48&&l<=57||l>=96&&l<=105||l==8||l==46};function prof(e){let r=440,t=440,l=440;for(let n=440;n>0;n--)for(let o=400;o>0;o--){let c=e[0][0]*n+e[1][0]*o-e[2][0],f=e[0][1]*n+e[1][1]*o-e[2][1],a=e[0][2]*n+e[1][2]*o-e[2][2],i=n*e[0][3]+o*e[1][3];c<0||f<0||a<0||i<r&&(r=i,t=n,l=o)}return[r,t,l]}function tta(){let e=newm(elem("table"));elem("textarea").value=`${gtf(e)}\n\n${grs(e)}\nx1 >= 0, x2 >= 0`.replaceAll(" 1x"," x");let r=prof(e);elem("._x").innerText=`x1 = ${r[1]}; x2 = ${r[2]}; f(x) = ${r[0]}`,elem("._x").innerText+=`\nТ.е. потребуется ${r[1]} кг сена и ${r[2]} кг концентратов.\nИтоговые затраты: ${r[0]}`,mainTable.rows[4].cells[4].innerText=r[0],get()}function get(){const e=elem("canvas"),r=new Plotta(e,{linedatas:newLinedata(parseInput()[1].length),config:{title:{location:"center",color:"#000",text:"График ф-ции"},grid:{visible:!0,color:"#888888"},border:{visible:!0,color:"#99f",width:1}}});r.SetAxisYLabel("X2"),r.SetAxisXLabel("X1"),r.SetAxisYLabelColor("#99f"),r.SetAxisXLabelColor("#99f"),r.SetTicsColor("#99f")}function parseInput(){let e=elem("textarea").value.replaceAll(";","").split(`\n\n`);return e[1]=e[1].split(`\n`),e}function newLinedata(e){let r=[];for(let t=0;t<e;t++)r.push({id:`line${t}`,type:"func",legend:parseInput()[1][t],color:colors[t],visible:!0,func:new Function("y",`return (${multSign(algebra.parse(parseInput()[1][t].replace(">=","=").replace("<=","=").replace("x1","y").replace("x2","z").replace("-y","0-y").replace("-z","0-z")).solveFor("z").toString())});`),dotNum:1e3});return r}function multSign(e){let r=e,t=e.match(/[0-9]\y/g),l=[];if(t)for(let n=0;n<t.length;n++)l[n]=t[n][0]+"*"+t[n][1],r=r.replace(t[n],l[n]);return r}</script>
