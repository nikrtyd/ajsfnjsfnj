<!doctypehtml><html lang=en><meta charset=UTF-8><meta content=IE=edge http-equiv=X-UA-Compatible><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Задача: график 2</title><style>@import"https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap";:root{--body-background: #114;--body-foreground: #eee;--body-background-locked: #225;--body-foreground-locked: #ddd;--button-background: #336;--button-background-active: #225;--button-border: #ccc;--table-border: #99f;--input-border: #aaf;--system-before: #ccc2;--label: #66a;--good: #6f80ef;--bad: #6c70df;--border-radius: 20px}body,main{margin:0 auto;background:var(--body-background);color:var(--body-foreground);font-family:"Bahnschrift","JetBrains Mono",Geneva,Verdana,sans-serif;font-size:18px;height:100vh}.flex{display:flex}.ai-c{align-items:center}.jc-c{justify-content:center}.dir-col{flex-direction:column}.ta-c{text-align:center}.hide{display:none}table,input[type=text],select,textarea{border-radius:20px;overflow:hidden;border:1px solid #99f;font:inherit;font-family:"JetBrains Mono"}select{padding:5px}button{padding:10px 20px;background:#77d;border-radius:20px;font:inherit;border:none}button:active{background:#44a}input,select,textarea{background:inherit;border:2px solid var(--input-border);padding:20px;color:inherit;min-height:30px}textarea{min-width:260px;border-radius:20px 20px 0}.good,.bad{font-weight:bold;font-size:14px}.good{color:var(--good)}.bad{color:var(--bad)}label{font-weight:bold;font-size:14px;color:var(--button-border)}.full-wh{width:100vw;height:100vh}.gap{gap:20px}.out{background-color:#fff}._x{text-align:center;color:#000;margin-bottom:10px}</style><body><div class="flex ai-c dir-col jc-c full-wh gap"><div class="in cont flex dir-col gap"><textarea cols=30 rows=10></textarea><button id=calc onclick=get()>Вычислить</button></div><div class="out cont flex dir-col gap"><canvas style="width:500px;height:500px;border:1px solid #d3d3d3"height=500 id=canvas width=500>Graph Test</canvas><span class=_x></span></div></div><script src=https://cdn.jsdelivr.net/npm/plotta.js@1.1.1/dist/dev/plotta.min.js></script><script crossorigin=anonymous integrity=sha512-6lYnaXxV7SCjRXACDDfNod7K610C8CkFbFlnxa3ZowVEbdWlnnJ5rvP9zWenwOhPBY+N3VqW/3SL0/mS4YJYlQ== referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/algebra.js/0.2.3/algebra.js></script><script>let colors=["#f00","#0f0","#00f","#f0f","#f70","#70f","#f005","#0f05","#00f5","#f0f5","#f705"];function elem(n){return document.querySelector(n)}function elems(n){return document.querySelectorAll(n)}function get(){const n=elem("canvas"),e=new Plotta(n,{linedatas:newLinedata(parseInput()[1].length),config:{title:{location:"center",color:"#000",text:"График ф-ции"},grid:{visible:!0,color:"#888888"},border:{visible:!0,color:"#99f",width:1}}});e.SetAxisYLabel("X2"),e.SetAxisXLabel("X1"),e.SetAxisYLabelColor("#99f"),e.SetAxisXLabelColor("#99f"),e.SetTicsColor("#99f");let t=parseInput(!0),r=t[1],l=prof(t[0][0],t[0][1],r[0][0],r[0][1],r[0][2],r[1][0],r[1][1],r[1][2],r[2][0],r[2][1],r[2][2]);elem("._x").innerText=`x1 = ${l[1]}; x2 = ${l[2]}; f(x) = ${l[0]}`}function prof(n,e,t,r,l,o,u,x,A,m,g){let a=0,f=0,p=0;for(let c=0;c<400;c++)for(let i=0;i<400;i++){let b=t*c+r*i,d=o*c+u*i,h=A*c+m*i,s=c*n+i*e;b>l||d<x||h>g||s>a&&(a=s,f=c,p=i)}return[a,f,p]}function parseInput(n){let e=elem("textarea").value.replaceAll(";","").split(`\n\n`);if(e[1]=e[1].split(`\n`),n){let t=e[0].substring(6,15).replaceAll(" x"," 1x").replaceAll("-x","-1x").substring(1);e[0]=[t.split("x1 + ")[0],t.split("x2")[0].split(" + ")[1]];let r=[];for(let l=0;l<e[1].length;l++){e[1][l]=` ${e[1][l]}`,e[1][l].match("x1 +")||(e[1][l]=`0x1 + ${e[1][l]}`);let o=e[1][l].replaceAll(" x"," 1x").replaceAll("-x","-1x").replaceAll("x1","").replaceAll("x2","").replaceAll(">=","").replaceAll("<=","").replaceAll("+","").replaceAll("  "," ").replaceAll("  "," ").trim().split(" ");r[l]=o}e[1]=r,e.pop()}return e}function newLinedata(n){let e=[];for(let t=0;t<n;t++)e.push({id:`line${t}`,type:"func",legend:parseInput()[1][t],color:colors[t],visible:!0,func:new Function("y",`return (${multSign(algebra.parse(parseInput()[1][t].replace(">=","=").replace("<=","=").replace("x1","y").replace("x2","z").replace("-y","0-y").replace("-z","0-z")).solveFor("z").toString())});`),dotNum:1e3});return e}function multSign(n){let e=n,t=n.match(/[0-9]\y/g),r=[];if(t)for(let l=0;l<t.length;l++)r[l]=t[l][0]+"*"+t[l][1],e=e.replace(t[l],r[l]);return e}</script>

  